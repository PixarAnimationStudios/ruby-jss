<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: JSS::XMLWorkaround
  
    &mdash; ruby-jss-1.3.3
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "JSS::XMLWorkaround";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (X)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../JSS.html" title="JSS (module)">JSS</a></span></span>
     &raquo; 
    <span class="title">XMLWorkaround</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: JSS::XMLWorkaround
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/jss/xml_workaround.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Since a non-trivial amounts of the JSON data from the API are borked, the
methods here can be used to parse the XML data into usable JSON, which we
can then treat normally.</p>

<p>For classes with borked JSON, set the constant USE_XML_WORKAROUND to a Hash
with a single key that maps the structure of the XML and resultant Ruby
data.</p>

<p>As an example, here&#39;s the data map from JSS::PatchTitle</p>

<p>USE_XML_WORKAROUND = {</p>

<pre class="code ruby"><code class="ruby">patch_software_title: {
  id: -1,
  name: JSS::BLANK,
  name_id: JSS::BLANK,
  source_id: -1,
  notifications: {
    email_notification: nil,
    web_notification: nil
  },
  category: {
    id: -1,
    name: JSS::BLANK
  },
  versions: [
    {
      software_version: JSS::BLANK,
      package: -1,
        name: JSS::BLANK
      }
    }
  ]
}</code></pre>

<p>}.freeze</p>

<p>The constant must always be a hash that represents the data structure of
the object. The keys match the names of the XML elements, and the values
indicate how to handle the element values.</p>

<p>Single-value attributes will be converted based on the provided map example
The class of the map example is the class of the desired data, and the
value of the map example is the value to use when the XML data is nil or
empty.</p>

<p>So a map example of &#39;&#39; (an empty string, a.k.a. JSS::BLANK)
indicates that the value should be a String and if the XML element is nil
or empty, use &#39;&#39; in the Ruby data. If its -1, that means the value
should be an Integer, and if its empty or nil, use -1 in Ruby.</p>

<p>Booleans are special: the map example must be nil, and nil is used when the
xml is empty, since you want to be able to know that the XML value was
neither true nor false.</p>

<p>Allowed single value classes and common default examples are:</p>

<pre class="code ruby"><code class="ruby">String, common default: &#39;&#39; or JSS::BLANK
Integer, common default: -1
Float, common default: -1.0
Boolean, required default: nil</code></pre>

<p>Arrays and Hashes will be recognized as such, and their contents will be
converted recursively using the same process.</p>

<p>For Arrays, provide one example in the map of an Array item, and all sub
elements will be processd like the example. See the &#39;:versions&#39;
array defiend in the example above</p>

<p>For sub-hashes, use the same technique as for the main hash. see the
:category value above.</p>

<p>IMPORTANT NOTE: Lots of Arrays in the XML have a matching &#39;size&#39;
element containing an integer indicating how many items are in the array.
Unfortunately there is zero consistency about their existence or location.
If they exist at all, sometimes the are adjacent to the Array element,
sometimes within it.</p>

<p>Fortunately in Ruby, all container/enumerable classes have a &#39;size&#39;
or &#39;count&#39; method to easily get that number. As such, when parsing
XML elements, any &#39;size&#39; element that exists with no other
&#39;size&#39; elements, and contains only an integer value and no sub-
elements, are ignored. I haven&#39;t yet found any cases of a
&#39;size&#39; element that is used for anything else.</p>


  </div>
</div>
<div class="tags">
  

</div>
  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="BOOLEAN_STRINGS-constant" class="">BOOLEAN_STRINGS =
          
        </dt>
        <dd><pre class="code"><span class='qwords_beg'>%w[</span><span class='tstring_content'>true</span><span class='words_sep'> </span><span class='tstring_content'>false</span><span class='words_sep'>]</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="TRUE_STRING-constant" class="">TRUE_STRING =
          
        </dt>
        <dd><pre class="code"><span class='const'><span class='object_link'><a href="#BOOLEAN_STRINGS-constant" title="JSS::XMLWorkaround::BOOLEAN_STRINGS (constant)">BOOLEAN_STRINGS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span></pre></dd>
      
        <dt id="SIZE_ELEM_NAME-constant" class="">SIZE_ELEM_NAME =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>size</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#data_via_xml-class_method" title="data_via_xml (class method)">.<strong>data_via_xml</strong>(rsrc, map, api)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>When APIObject classes are fetched, API JSON data is retrieved by the
APIObject#lookup_object_data method, which parses the JSON into Ruby data.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#elem_as_array-class_method" title="elem_as_array (class method)">.<strong>elem_as_array</strong>(model, elem)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>convert an XML element into an Array.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#elem_as_hash-class_method" title="elem_as_hash (class method)">.<strong>elem_as_hash</strong>(model, elem)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>convert an XML element into a Hash.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#process_map_item-class_method" title="process_map_item (class method)">.<strong>process_map_item</strong>(model, element)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>given a REXML element, return its ruby value.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_size_sub_elem-class_method" title="remove_size_sub_elem (class method)">.<strong>remove_size_sub_elem</strong>(elem)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>remove the &#39;size&#39; sub element from a given element as long as: - a
sub element named &#39;size&#39; exists - there&#39;s only one sub element
named &#39;size&#39; - it doesn&#39;t have sub elements itself - and it
contains an integer value Such elements are extraneous for the most part,
and are not consistently located - sometimes they are in the Array-ish
elements they reference, sometimes they are alongside them.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="data_via_xml-class_method">
  
    .<strong>data_via_xml</strong>(rsrc, map, api)  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>When APIObject classes are fetched, API JSON data is retrieved by the
APIObject#lookup_object_data method, which parses the JSON into Ruby data.</p>

<p>If the APIObject class has the constant USE_XML_WORKAROUND defined, that
means the JSON data from the API is invalid, incorrect, or otherwise
borked. So instead, the  XML is retrieved from the API here.</p>

<p>It is then parsed by using the methods in this module and returned to the
APIObject#lookup_object_data method, which then treats it normally.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


125
126
127
128
129
130
131
132
133</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/xml_workaround.rb', line 125</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_data_via_xml'>data_via_xml</span><span class='lparen'>(</span><span class='id identifier rubyid_rsrc'>rsrc</span><span class='comma'>,</span> <span class='id identifier rubyid_map'>map</span><span class='comma'>,</span> <span class='id identifier rubyid_api'>api</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raw_xml'>raw_xml</span> <span class='op'>=</span> <span class='id identifier rubyid_api'>api</span><span class='period'>.</span><span class='id identifier rubyid_get_rsrc'>get_rsrc</span><span class='lparen'>(</span><span class='id identifier rubyid_rsrc'>rsrc</span><span class='comma'>,</span> <span class='symbol'>:xml</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_xmlroot'>xmlroot</span> <span class='op'>=</span> <span class='const'>REXML</span><span class='op'>::</span><span class='const'>Document</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_raw_xml'>raw_xml</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_root'><span class='object_link'><a href="../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span></span>
  <span class='id identifier rubyid_hash_from_xml'>hash_from_xml</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_map'>map</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_model'>model</span><span class='op'>|</span>
    <span class='id identifier rubyid_hash_from_xml'>hash_from_xml</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_process_map_item'>process_map_item</span> <span class='id identifier rubyid_model'>model</span><span class='comma'>,</span> <span class='id identifier rubyid_xmlroot'>xmlroot</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_hash_from_xml'>hash_from_xml</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="elem_as_array-class_method">
  
    .<strong>elem_as_array</strong>(model, elem)  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>convert an XML element into an Array</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


183
184
185
186
187
188
189
190
191</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/xml_workaround.rb', line 183</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_elem_as_array'>elem_as_array</span><span class='lparen'>(</span><span class='id identifier rubyid_model'>model</span><span class='comma'>,</span> <span class='id identifier rubyid_elem'>elem</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_remove_size_sub_elem'>remove_size_sub_elem</span> <span class='id identifier rubyid_elem'>elem</span>
  <span class='id identifier rubyid_arr'>arr</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_elem'>elem</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_subelem'>subelem</span><span class='op'>|</span>
    <span class='comment'># Recursion for the win!
</span>    <span class='id identifier rubyid_arr'>arr</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_process_map_item'>process_map_item</span><span class='lparen'>(</span><span class='id identifier rubyid_model'>model</span><span class='comma'>,</span> <span class='id identifier rubyid_subelem'>subelem</span><span class='rparen'>)</span>
  <span class='kw'>end</span> <span class='comment'># each subelem
</span>  <span class='id identifier rubyid_arr'>arr</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="elem_as_hash-class_method">
  
    .<strong>elem_as_hash</strong>(model, elem)  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>convert an XML element into a Hash</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


194
195
196
197
198
199
200
201
202
203
204</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/xml_workaround.rb', line 194</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_elem_as_hash'>elem_as_hash</span><span class='lparen'>(</span><span class='id identifier rubyid_model'>model</span><span class='comma'>,</span> <span class='id identifier rubyid_elem'>elem</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_remove_size_sub_elem'>remove_size_sub_elem</span> <span class='id identifier rubyid_elem'>elem</span>
  <span class='id identifier rubyid_hsh'>hsh</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_mod'>mod</span><span class='op'>|</span>
    <span class='id identifier rubyid_val'>val</span> <span class='op'>=</span> <span class='id identifier rubyid_process_map_item'>process_map_item</span><span class='lparen'>(</span><span class='id identifier rubyid_mod'>mod</span><span class='comma'>,</span> <span class='id identifier rubyid_elem'>elem</span><span class='period'>.</span><span class='id identifier rubyid_elements'>elements</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_val'>val</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>if</span>  <span class='id identifier rubyid_mod'>mod</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_val'>val</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_val'>val</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span> <span class='kw'>if</span>  <span class='id identifier rubyid_mod'>mod</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_val'>val</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_hsh'>hsh</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_val'>val</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_hsh'>hsh</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="process_map_item-class_method">
  
    .<strong>process_map_item</strong>(model, element)  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>given a REXML element, return its ruby value</p>

<p>This method is then called recursively as needed when traversing XML
elements that contain sub-elements.</p>

<p>XML Elements that do not contain other elements are converted to a single
ruby value.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/xml_workaround.rb', line 143</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_process_map_item'>process_map_item</span><span class='lparen'>(</span><span class='id identifier rubyid_model'>model</span><span class='comma'>,</span> <span class='id identifier rubyid_element'>element</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_model'>model</span>
  <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></span>
    <span class='id identifier rubyid_element'>element</span> <span class='op'>?</span> <span class='id identifier rubyid_element'>element</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='op'>:</span> <span class='id identifier rubyid_model'>model</span>
  <span class='kw'>when</span> <span class='const'>Integer</span>
    <span class='id identifier rubyid_element'>element</span> <span class='op'>?</span> <span class='id identifier rubyid_element'>element</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>:</span> <span class='id identifier rubyid_model'>model</span>
  <span class='kw'>when</span> <span class='const'>Float</span>
    <span class='id identifier rubyid_element'>element</span> <span class='op'>?</span> <span class='id identifier rubyid_element'>element</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>:</span> <span class='id identifier rubyid_model'>model</span>
  <span class='kw'>when</span> <span class='kw'>nil</span>
    <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>unless</span> <span class='id identifier rubyid_element'>element</span>
    <span class='id identifier rubyid_element'>element</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="#TRUE_STRING-constant" title="JSS::XMLWorkaround::TRUE_STRING (constant)">TRUE_STRING</a></span></span> <span class='op'>?</span> <span class='kw'>true</span> <span class='op'>:</span> <span class='kw'>false</span>
  <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span></span>
    <span class='id identifier rubyid_element'>element</span> <span class='op'>?</span> <span class='id identifier rubyid_elem_as_array'>elem_as_array</span><span class='lparen'>(</span><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='comma'>,</span> <span class='id identifier rubyid_element'>element</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></span>
    <span class='id identifier rubyid_element'>element</span> <span class='op'>?</span> <span class='id identifier rubyid_elem_as_hash'>elem_as_hash</span><span class='lparen'>(</span><span class='id identifier rubyid_model'>model</span><span class='comma'>,</span> <span class='id identifier rubyid_element'>element</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='kw'>end</span> <span class='comment'># case type
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="remove_size_sub_elem-class_method">
  
    .<strong>remove_size_sub_elem</strong>(elem)  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>remove the &#39;size&#39; sub element from a given element as long as:</p>
<ul><li>
<p>a sub element named &#39;size&#39; exists</p>
</li><li>
<p>there&#39;s only one sub element named &#39;size&#39;</p>
</li><li>
<p>it doesn&#39;t have sub elements itself</p>
</li><li>
<p>and it contains an integer value</p>
</li></ul>

<p>Such elements are extraneous for the most part, and are not consistently
located - sometimes they are in the Array-ish elements they reference,
sometimes they are alongside them. In any case they confuse the logic when
deciding if an element with sub-elements should become an Array or a Hash.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


172
173
174
175
176
177
178
179
180</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/xml_workaround.rb', line 172</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_remove_size_sub_elem'>remove_size_sub_elem</span><span class='lparen'>(</span><span class='id identifier rubyid_elem'>elem</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_size_elems'>size_elems</span> <span class='op'>=</span> <span class='id identifier rubyid_elem'>elem</span><span class='period'>.</span><span class='id identifier rubyid_elements'>elements</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_subel'>subel</span><span class='op'>|</span> <span class='id identifier rubyid_subel'>subel</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="#SIZE_ELEM_NAME-constant" title="JSS::XMLWorkaround::SIZE_ELEM_NAME (constant)">SIZE_ELEM_NAME</a></span></span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_size_elem'>size_elem</span> <span class='op'>=</span> <span class='id identifier rubyid_size_elems'>size_elems</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_size_elem'>size_elem</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_size_elems'>size_elems</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='op'>==</span> <span class='int'>1</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_size_elem'>size_elem</span><span class='period'>.</span><span class='id identifier rubyid_has_elements?'>has_elements?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_size_elem'>size_elem</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span><span class='period'>.</span><span class='id identifier rubyid_jss_integer?'>jss_integer?</span>
  <span class='id identifier rubyid_elem'>elem</span><span class='period'>.</span><span class='id identifier rubyid_delete_element'>delete_element</span> <span class='id identifier rubyid_size_elem'>size_elem</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Fri Aug  7 11:26:26 2020 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.20 (ruby-2.3.7).
</div>

    </div>
  </body>
</html>
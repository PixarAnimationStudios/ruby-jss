<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: JSS::Scopable::Scope
  
    &mdash; ruby-jss-1.3.3
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "JSS::Scopable::Scope";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../JSS.html" title="JSS (module)">JSS</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Scopable.html" title="JSS::Scopable (module)">Scopable</a></span></span>
     &raquo; 
    <span class="title">Scope</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: JSS::Scopable::Scope
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">JSS::Scopable::Scope</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/jss/api_object/scopable/scope.rb<span class="defines">,<br />
  lib/jss.rb</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>This class represents a Scope in the JSS, as can be applied to Scopable
objects like Policies, Profiles, etc. Instances of this class are generally
used as the value of the @scope attribute of those objects.</p>

<p>Scope data comes from the API as a hash within the overall object data. The
main keys of the hash define the included targets of the scope. A sub-hash
defines limitations on those inclusions, and another sub-hash defines
explicit exclusions.</p>

<p>This class provides methods for adding, removing, or fully replacing the
various items in scope&#39;s realms: targets, limitations, and exclusions.</p>

<p>IMPORTANT: The classic API has bugs regarding the use of Users, UserGroups,
LDAP/Local Users, &amp; LDAP User Groups in scopes. Here&#39;s a discussion
of those bugs and how ruby-jss handles them.</p>

<p>Targets/Inclusions</p>

<pre class="code ruby"><code class="ruby">- &#39;Users&#39; can only be JSS::Users - No LDAP
  - BUG: They do not appear in API data (XML or JSON) and are
    NOT SUPPORTED in ruby-jss.
  - You must use the Web UI to work with them in a Scope.
- &#39;User Groups&#39; can only be JSS::UserGroups - No LDAP
  - BUG: They do not appear in API data (XML or JSON) and are
    NOT SUPPORTED in ruby-jss.
  - You must use the Web UI to work with them in a Scope.</code></pre>

<p>Limitations</p>

<pre class="code ruby"><code class="ruby">- &#39;LDAP/Local Users&#39; can be any string
  - The Web UI accepts any string, even if no matching Local or LDAP user.
  - The data shows up in API data in scope=&gt;limitations=&gt;users
    by name only (the string provided), no IDs
- &#39;LDAP User Groups&#39; can only be LDAP groups that actually exist
  - The Web UI won&#39;t let you add a group that doesn&#39;t exist in ldap
  - The data shows up in API data in scope=&gt;limitations=&gt;user_groups
    by name and LDAP ID (which may be empty)
  - The data ALSO shows up in API data in scope=&gt;limit_to_users=&gt;user_groups
    by name only, no LDAP IDs. ruby-jss ignores this and looks at
    scope=&gt;limitations=&gt;user_groups</code></pre>

<p>Exclusions, combines the behavior of Inclusions &amp; Limitations</p>

<pre class="code ruby"><code class="ruby">- &#39;Users&#39; can only be JSS::Users - No LDAP
  - BUG: They do not appear in API data (XML or JSON) and are
    NOT SUPPORTED in ruby-jss.
  - You must use the Web UI to work with them in a Scope.
- &#39;User Groups&#39; can only be JSS::UserGroups - No LDAP
  - BUG: They do not appear in API data (XML or JSON) and are
    NOT SUPPORTED in ruby-jss.
  - You must use the Web UI to work with them in a Scope.
- &#39;LDAP/Local Users&#39; can be any string
  - The Web UI accepts any string, even if no matching Local or LDAP user.
  - The data shows up in API data in scope=&gt;exclusions=&gt;users
    by name only (the string provided), no IDs
- &#39;LDAP User Groups&#39; can only be LDAP groups that actually exist
  - The Web UI won&#39;t let you add a group that doesn&#39;t exist in ldap
  - The data shows up in API data in scope=&gt;exclusions=&gt;user_groups
    by name and LDAP ID (which may be empty)</code></pre>

<p>How ruby-jss handles this:</p>

<pre class="code ruby"><code class="ruby"> - Methods #set_targets and #add_target will not accept the keys
   :user, :users, :user_group, :user_groups.

 - Method #remove_target will ignore them.

 - Methods #set_limitations, #add_limitation &amp; #remove_limitation will accept:
   - :user, :ldap_user, or :jamf_ldap_user (and their plurals) for working
     with &#39;LDAP/Local Users&#39;. When setting or adding, the provided
     string(s) must exist as either a JSS::User or an LDAP user
   - :user_group or :ldap_user_group (and their plurals) for working with
     &#39;LDAP User Groups&#39;. When setting or adding, the provided string
     must exist as a group in LDAP.

 - Methods #set_exclusions, #add_exclusion &amp; #remove_exclusion will accept:
   - :user, :ldap_user, or :jamf_ldap_user (and their plurals) for working
     with &#39;LDAP/Local Users&#39;. When setting or adding, the provided string(s)
     must exist as either a JSS::User or an LDAP user.
   - :user_group or :ldap_user_group (and their plurals) for working with
     &#39;LDAP User Groups&#39;&#39;. When setting or adding, the provided string
     must exist as a group in LDAP.

Internally in the Scope instance:

- The limitations and exclusions that match the WebUI&#39;s &#39;LDAP/Local Users&#39;
  are in @limitations[:jamf_ldap_users]  and @exclusions[:jamf_ldap_users]

- The  limitations and exclusions that match the WebUI&#39;s &#39;LDAP User Groups&#39;
  are in @limitations[:ldap_user_groups]  and @exclusions[:ldap_user_groups]</code></pre>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="../Scopable.html" title="JSS::Scopable (module)">JSS::Scopable</a></span></li>
    
  </ul>

</div>
  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="SCOPING_CLASSES-constant" class="">SCOPING_CLASSES =
          <div class="docstring">
  <div class="discussion">
    
<p>These are the classes that Scopes can use for defining a scope, keyed by
appropriate symbols. NOTE: All the user and group ones don&#39;t actually
refer to JSS::User or JSS::UserGroup. See IMPORTANT discussion above.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='label'>computers:</span> <span class='const'><span class='object_link'><a href="../../JSS.html" title="JSS (module)">JSS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Computer.html" title="JSS::Computer (class)">Computer</a></span></span><span class='comma'>,</span>
  <span class='label'>computer:</span> <span class='const'><span class='object_link'><a href="../../JSS.html" title="JSS (module)">JSS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Computer.html" title="JSS::Computer (class)">Computer</a></span></span><span class='comma'>,</span>
  <span class='label'>computer_groups:</span> <span class='const'><span class='object_link'><a href="../../JSS.html" title="JSS (module)">JSS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../ComputerGroup.html" title="JSS::ComputerGroup (class)">ComputerGroup</a></span></span><span class='comma'>,</span>
  <span class='label'>computer_group:</span> <span class='const'><span class='object_link'><a href="../../JSS.html" title="JSS (module)">JSS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../ComputerGroup.html" title="JSS::ComputerGroup (class)">ComputerGroup</a></span></span><span class='comma'>,</span>
  <span class='label'>mobile_devices:</span> <span class='const'><span class='object_link'><a href="../../JSS.html" title="JSS (module)">JSS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../MobileDevice.html" title="JSS::MobileDevice (class)">MobileDevice</a></span></span><span class='comma'>,</span>
  <span class='label'>mobile_device:</span> <span class='const'><span class='object_link'><a href="../../JSS.html" title="JSS (module)">JSS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../MobileDevice.html" title="JSS::MobileDevice (class)">MobileDevice</a></span></span><span class='comma'>,</span>
  <span class='label'>mobile_device_groups:</span> <span class='const'><span class='object_link'><a href="../../JSS.html" title="JSS (module)">JSS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../MobileDeviceGroup.html" title="JSS::MobileDeviceGroup (class)">MobileDeviceGroup</a></span></span><span class='comma'>,</span>
  <span class='label'>mobile_device_group:</span> <span class='const'><span class='object_link'><a href="../../JSS.html" title="JSS (module)">JSS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../MobileDeviceGroup.html" title="JSS::MobileDeviceGroup (class)">MobileDeviceGroup</a></span></span><span class='comma'>,</span>
  <span class='label'>buildings:</span> <span class='const'><span class='object_link'><a href="../../JSS.html" title="JSS (module)">JSS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Building.html" title="JSS::Building (class)">Building</a></span></span><span class='comma'>,</span>
  <span class='label'>building:</span> <span class='const'><span class='object_link'><a href="../../JSS.html" title="JSS (module)">JSS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Building.html" title="JSS::Building (class)">Building</a></span></span><span class='comma'>,</span>
  <span class='label'>departments:</span> <span class='const'><span class='object_link'><a href="../../JSS.html" title="JSS (module)">JSS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Department.html" title="JSS::Department (class)">Department</a></span></span><span class='comma'>,</span>
  <span class='label'>department:</span> <span class='const'><span class='object_link'><a href="../../JSS.html" title="JSS (module)">JSS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Department.html" title="JSS::Department (class)">Department</a></span></span><span class='comma'>,</span>
  <span class='label'>network_segments:</span> <span class='const'><span class='object_link'><a href="../../JSS.html" title="JSS (module)">JSS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../NetworkSegment.html" title="JSS::NetworkSegment (class)">NetworkSegment</a></span></span><span class='comma'>,</span>
  <span class='label'>network_segment:</span> <span class='const'><span class='object_link'><a href="../../JSS.html" title="JSS (module)">JSS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../NetworkSegment.html" title="JSS::NetworkSegment (class)">NetworkSegment</a></span></span><span class='comma'>,</span>
  <span class='label'>ibeacon:</span> <span class='const'><span class='object_link'><a href="../../JSS.html" title="JSS (module)">JSS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../IBeacon.html" title="JSS::IBeacon (class)">IBeacon</a></span></span><span class='comma'>,</span>
  <span class='label'>ibeacons:</span> <span class='const'><span class='object_link'><a href="../../JSS.html" title="JSS (module)">JSS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../IBeacon.html" title="JSS::IBeacon (class)">IBeacon</a></span></span><span class='comma'>,</span>
  <span class='label'>user:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>users:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>ldap_user:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>ldap_users:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>jamf_ldap_user:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>jamf_ldap_users:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>user_group:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>user_groups:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>ldap_user_group:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>ldap_user_groups:</span> <span class='kw'>nil</span>
<span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="LDAP_JAMF_USER_KEYS-constant" class="">LDAP_JAMF_USER_KEYS =
          <div class="docstring">
  <div class="discussion">
    
<p>These keys always mean :jamf_ldap_users</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='qsymbols_beg'>%i[
</span><span class='tstring_content'>  user</span><span class='words_sep'>
</span><span class='tstring_content'>  users</span><span class='words_sep'>
</span><span class='tstring_content'>  ldap_user</span><span class='words_sep'>
</span><span class='tstring_content'>  ldap_users</span><span class='words_sep'>
</span><span class='tstring_content'>  jamf_ldap_user</span><span class='words_sep'>
</span><span class='tstring_content'>  jamf_ldap_users</span><span class='words_sep'>
</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="LDAP_GROUP_KEYS-constant" class="">LDAP_GROUP_KEYS =
          <div class="docstring">
  <div class="discussion">
    
<p>These keys always mean :ldap_user_groups</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='qsymbols_beg'>%i[
</span><span class='tstring_content'>  user_group</span><span class='words_sep'>
</span><span class='tstring_content'>  user_groups</span><span class='words_sep'>
</span><span class='tstring_content'>  ldap_user_group</span><span class='words_sep'>
</span><span class='tstring_content'>  ldap_user_groups</span><span class='words_sep'>
</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="TARGETS_AND_GROUPS-constant" class="">TARGETS_AND_GROUPS =
          <div class="docstring">
  <div class="discussion">
    
<p>This hash maps the availble Scope Target keys from SCOPING_CLASSES to their
corresponding target group keys from SCOPING_CLASSES.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span> <span class='label'>computers:</span> <span class='symbol'>:computer_groups</span><span class='comma'>,</span> <span class='label'>mobile_devices:</span> <span class='symbol'>:mobile_device_groups</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="ESS-constant" class="">ESS =
          <div class="docstring">
  <div class="discussion">
    
<p>added to the ends of singular key names if needed, e.g. computer_group
=&gt; computer_groups</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>s</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="INCLUSIONS-constant" class="">INCLUSIONS =
          <div class="docstring">
  <div class="discussion">
    
<p>These can be part of the base inclusion list of the scope, along with the
appropriate target and target group keys</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='qsymbols_beg'>%i[</span><span class='tstring_content'>buildings</span><span class='words_sep'> </span><span class='tstring_content'>departments</span><span class='words_sep'>]</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="LIMITATIONS-constant" class="">LIMITATIONS =
          <div class="docstring">
  <div class="discussion">
    
<p>These can limit the inclusion list These are the keys that come from the
API the  :users key from the API is what we call :jamf_ldap_users and the
:user_groups key from the API we call :ldap_user_groups See the IMPORTANT
discussion above.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='qsymbols_beg'>%i[
</span><span class='tstring_content'>  ibeacons</span><span class='words_sep'>
</span><span class='tstring_content'>  network_segments</span><span class='words_sep'>
</span><span class='tstring_content'>  jamf_ldap_users</span><span class='words_sep'>
</span><span class='tstring_content'>  ldap_user_groups</span><span class='words_sep'>
</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="EXCLUSIONS-constant" class="">EXCLUSIONS =
          <div class="docstring">
  <div class="discussion">
    
<p>any of them can be excluded</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='const'><span class='object_link'><a href="#INCLUSIONS-constant" title="JSS::Scopable::Scope::INCLUSIONS (constant)">INCLUSIONS</a></span></span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="#LIMITATIONS-constant" title="JSS::Scopable::Scope::LIMITATIONS (constant)">LIMITATIONS</a></span></span></pre></dd>
      
        <dt id="DEFAULT_SCOPE-constant" class="">DEFAULT_SCOPE =
          <div class="docstring">
  <div class="discussion">
    
<p>Here&#39;s a default scope as it might come from the API.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='label'>all_computers:</span> <span class='kw'>true</span><span class='comma'>,</span>
  <span class='label'>all_mobile_devices:</span> <span class='kw'>true</span><span class='comma'>,</span>
  <span class='label'>limitations:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='label'>exclusions:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
<span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
    </dl>
  




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#all_targets-instance_method" title="#all_targets (instance method)">#<strong>all_targets</strong>  &#x21d2; Boolean </a>
    

    
      (also: #all_targets?)
    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Does this scope cover all targets?.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#container-instance_method" title="#container (instance method)">#<strong>container</strong>  &#x21d2; JSS::APIObject subclass </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A reference to the object that contains this Scope.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#exclusions-instance_method" title="#exclusions (instance method)">#<strong>exclusions</strong>  &#x21d2; Hash&lt;Array&gt; </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The items in these arrays are the exclusions applied to targets in the
@inclusions .</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#inclusions-instance_method" title="#inclusions (instance method)">#<strong>inclusions</strong>  &#x21d2; Hash&lt;Array&gt; </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The items which form the base scope of included targets.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#limitations-instance_method" title="#limitations (instance method)">#<strong>limitations</strong>  &#x21d2; Hash&lt;Array&gt; </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The items in these arrays are the limitations applied to targets in the
@inclusions .</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#target_class-instance_method" title="#target_class (instance method)">#<strong>target_class</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>what type of target is this scope for? Computers or Mobiledevices?.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#unable_to_verify_ldap_entries-instance_method" title="#unable_to_verify_ldap_entries (instance method)">#<strong>unable_to_verify_ldap_entries</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Should we expect a potential 409 Conflict if we can&#39;t connect to LDAP
servers for verification?.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_exclusion-instance_method" title="#add_exclusion (instance method)">#<strong>add_exclusion</strong>(key, item)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Add a single item for exclusions of this scope.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_limitation-instance_method" title="#add_limitation (instance method)">#<strong>add_limitation</strong>(key, item)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Add a single item for limiting this scope.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_target-instance_method" title="#add_target (instance method)">#<strong>add_target</strong>(key, item)  &#x21d2; void </a>
    

    
      (also: #add_inclusion)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Add a single item as a target in this scope.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#include_all-instance_method" title="#include_all (instance method)">#<strong>include_all</strong>(clear = false)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Set the scope&#39;s inclusions to all targets.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(target_key, raw_scope = nil)  &#x21d2; Scope </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>If raw_scope is empty, a default scope, scoped to all targets, is created,
and can be modified as needed.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pretty_print_instance_variables-instance_method" title="#pretty_print_instance_variables (instance method)">#<strong>pretty_print_instance_variables</strong>  &#x21d2; Array </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Remove the init_data and api object from the instance_variables used to
create pretty-print (pp) output.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_exclusion-instance_method" title="#remove_exclusion (instance method)">#<strong>remove_exclusion</strong>(key, item)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Remove a single item for exclusions of this scope.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_limitation-instance_method" title="#remove_limitation (instance method)">#<strong>remove_limitation</strong>(key, item)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Remove a single item for limiting this scope.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_target-instance_method" title="#remove_target (instance method)">#<strong>remove_target</strong>(key, item)  &#x21d2; void </a>
    

    
      (also: #remove_inclusion)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Remove a single item as a target for this scope.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#scope_xml-instance_method" title="#scope_xml (instance method)">#<strong>scope_xml</strong>  &#x21d2; REXML::Element </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Return a REXML Element containing the current state of the Scope for adding
into the XML of the container.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_exclusion-instance_method" title="#set_exclusion (instance method)">#<strong>set_exclusion</strong>(key, list)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Replace an exclusion list for this scope.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_limitation-instance_method" title="#set_limitation (instance method)">#<strong>set_limitation</strong>(key, list)  &#x21d2; void </a>
    

    
      (also: #set_limitations)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Replace a limitation list for this scope.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_targets-instance_method" title="#set_targets (instance method)">#<strong>set_targets</strong>(key, list)  &#x21d2; void </a>
    

    
      (also: #set_target, #set_inclusion, #set_inclusions)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Replace a list of item names for as targets in this scope.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(target_key, raw_scope = nil)  &#x21d2; <tt><span class='object_link'><a href="" title="JSS::Scopable::Scope (class)">Scope</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>If raw_scope is empty, a default scope, scoped to all targets, is created,
and can be modified as needed.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>target_key</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the kind of thing we&#39;re scoping, one of <span class='object_link'><a href="#TARGETS_AND_GROUPS-constant" title="JSS::Scopable::Scope::TARGETS_AND_GROUPS (constant)">TARGETS_AND_GROUPS</a></span></p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>raw_scope</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>the JSON :scope data from an API query that is scopable, e.g. a Policy.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/scopable/scope.rb', line 291</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_target_key'>target_key</span><span class='comma'>,</span> <span class='id identifier rubyid_raw_scope'>raw_scope</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raw_scope'>raw_scope</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="#DEFAULT_SCOPE-constant" title="JSS::Scopable::Scope::DEFAULT_SCOPE (constant)">DEFAULT_SCOPE</a></span></span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
  <span class='kw'>unless</span> <span class='const'><span class='object_link'><a href="#TARGETS_AND_GROUPS-constant" title="JSS::Scopable::Scope::TARGETS_AND_GROUPS (constant)">TARGETS_AND_GROUPS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='id identifier rubyid_target_key'>target_key</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../../JSS.html" title="JSS (module)">JSS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../InvalidDataError.html" title="JSS::InvalidDataError (class)">InvalidDataError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The target class of a Scope must be one of the symbols :</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="#TARGETS_AND_GROUPS-constant" title="JSS::Scopable::Scope::TARGETS_AND_GROUPS (constant)">TARGETS_AND_GROUPS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, :</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='ivar'>@target_key</span> <span class='op'>=</span> <span class='id identifier rubyid_target_key'>target_key</span>
  <span class='ivar'>@target_class</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="#SCOPING_CLASSES-constant" title="JSS::Scopable::Scope::SCOPING_CLASSES (constant)">SCOPING_CLASSES</a></span></span><span class='lbracket'>[</span><span class='ivar'>@target_key</span><span class='rbracket'>]</span>
  <span class='ivar'>@group_key</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="#TARGETS_AND_GROUPS-constant" title="JSS::Scopable::Scope::TARGETS_AND_GROUPS (constant)">TARGETS_AND_GROUPS</a></span></span><span class='lbracket'>[</span><span class='ivar'>@target_key</span><span class='rbracket'>]</span>
  <span class='ivar'>@group_class</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="#SCOPING_CLASSES-constant" title="JSS::Scopable::Scope::SCOPING_CLASSES (constant)">SCOPING_CLASSES</a></span></span><span class='lbracket'>[</span><span class='ivar'>@group_key</span><span class='rbracket'>]</span>

  <span class='ivar'>@inclusion_keys</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='ivar'>@target_key</span><span class='comma'>,</span> <span class='ivar'>@group_key</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="#INCLUSIONS-constant" title="JSS::Scopable::Scope::INCLUSIONS (constant)">INCLUSIONS</a></span></span>
  <span class='ivar'>@exclusion_keys</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='ivar'>@target_key</span><span class='comma'>,</span> <span class='ivar'>@group_key</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="#EXCLUSIONS-constant" title="JSS::Scopable::Scope::EXCLUSIONS (constant)">EXCLUSIONS</a></span></span>

  <span class='ivar'>@all_key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>all_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_target_key'>target_key</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
  <span class='ivar'>@all_targets</span> <span class='op'>=</span> <span class='id identifier rubyid_raw_scope'>raw_scope</span><span class='lbracket'>[</span><span class='ivar'>@all_key</span><span class='rbracket'>]</span>

  <span class='comment'># Everything gets mapped from an Array of Hashes to
</span>  <span class='comment'># an Array of ids
</span>  <span class='ivar'>@inclusions</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@inclusion_keys</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span>
    <span class='id identifier rubyid_raw_scope'>raw_scope</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='ivar'>@inclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_raw_scope'>raw_scope</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_n'>n</span><span class='op'>|</span> <span class='id identifier rubyid_n'>n</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span> <span class='comment'># @inclusion_keys.each do |k|
</span>
  <span class='comment'># the  :users key from the API is what we call :jamf_ldap_users
</span>  <span class='comment'># and the :user_groups key from the API we call :ldap_user_groups
</span>  <span class='comment'># See the IMPORTANT discussion above.
</span>  <span class='ivar'>@limitations</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_raw_scope'>raw_scope</span><span class='lbracket'>[</span><span class='symbol'>:limitations</span><span class='rbracket'>]</span>

    <span class='const'><span class='object_link'><a href="#LIMITATIONS-constant" title="JSS::Scopable::Scope::LIMITATIONS (constant)">LIMITATIONS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span>
      <span class='comment'># :jamf_ldap_users comes from :users in the API data
</span>      <span class='kw'>if</span> <span class='id identifier rubyid_k'>k</span> <span class='op'>==</span> <span class='symbol'>:jamf_ldap_users</span>
        <span class='id identifier rubyid_api_data'>api_data</span> <span class='op'>=</span> <span class='id identifier rubyid_raw_scope'>raw_scope</span><span class='lbracket'>[</span><span class='symbol'>:limitations</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:users</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_api_data'>api_data</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='ivar'>@limitations</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_api_data'>api_data</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_n'>n</span><span class='op'>|</span> <span class='id identifier rubyid_n'>n</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='rbrace'>}</span>

      <span class='comment'># :ldap_user_groups comes from :user_groups in the API data
</span>      <span class='kw'>elsif</span> <span class='id identifier rubyid_k'>k</span> <span class='op'>==</span> <span class='symbol'>:ldap_user_groups</span>
        <span class='id identifier rubyid_api_data'>api_data</span> <span class='op'>=</span> <span class='id identifier rubyid_raw_scope'>raw_scope</span><span class='lbracket'>[</span><span class='symbol'>:limitations</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:user_groups</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_api_data'>api_data</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='ivar'>@limitations</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_api_data'>api_data</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_n'>n</span><span class='op'>|</span> <span class='id identifier rubyid_n'>n</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='rbrace'>}</span>

      <span class='comment'># others handled normally.
</span>      <span class='kw'>else</span>
        <span class='id identifier rubyid_api_data'>api_data</span> <span class='op'>=</span> <span class='id identifier rubyid_raw_scope'>raw_scope</span><span class='lbracket'>[</span><span class='symbol'>:limitations</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_api_data'>api_data</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='ivar'>@limitations</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_api_data'>api_data</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_n'>n</span><span class='op'>|</span> <span class='id identifier rubyid_n'>n</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='rbrace'>}</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span> <span class='comment'># LIMITATIONS.each do |k|
</span>  <span class='kw'>end</span> <span class='comment'># if raw_scope[:limitations]
</span>
  <span class='comment'># the  :users key from the API is what we call :jamf_ldap_users
</span>  <span class='comment'># and the :user_groups key from the API we call :ldap_user_groups
</span>  <span class='comment'># See the IMPORTANT discussion above.
</span>  <span class='ivar'>@exclusions</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_raw_scope'>raw_scope</span><span class='lbracket'>[</span><span class='symbol'>:exclusions</span><span class='rbracket'>]</span>

    <span class='ivar'>@exclusion_keys</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span>
      <span class='comment'># :jamf_ldap_users comes from :users in the API data
</span>      <span class='kw'>if</span> <span class='id identifier rubyid_k'>k</span> <span class='op'>==</span> <span class='symbol'>:jamf_ldap_users</span>
        <span class='id identifier rubyid_api_data'>api_data</span> <span class='op'>=</span> <span class='id identifier rubyid_raw_scope'>raw_scope</span><span class='lbracket'>[</span><span class='symbol'>:exclusions</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:users</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_api_data'>api_data</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='ivar'>@exclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_api_data'>api_data</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_n'>n</span><span class='op'>|</span> <span class='id identifier rubyid_n'>n</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='rbrace'>}</span>

      <span class='comment'># :ldap_user_groups comes from :user_groups in the API data
</span>      <span class='kw'>elsif</span> <span class='id identifier rubyid_k'>k</span> <span class='op'>==</span> <span class='symbol'>:ldap_user_groups</span>
        <span class='id identifier rubyid_api_data'>api_data</span> <span class='op'>=</span> <span class='id identifier rubyid_raw_scope'>raw_scope</span><span class='lbracket'>[</span><span class='symbol'>:exclusions</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:user_groups</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_api_data'>api_data</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='ivar'>@exclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_api_data'>api_data</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_n'>n</span><span class='op'>|</span> <span class='id identifier rubyid_n'>n</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='rbrace'>}</span>

      <span class='comment'># others handled normally.
</span>      <span class='kw'>else</span>
        <span class='id identifier rubyid_api_data'>api_data</span> <span class='op'>=</span> <span class='id identifier rubyid_raw_scope'>raw_scope</span><span class='lbracket'>[</span><span class='symbol'>:exclusions</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_api_data'>api_data</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='ivar'>@exclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_api_data'>api_data</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_n'>n</span><span class='op'>|</span> <span class='id identifier rubyid_n'>n</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='rbrace'>}</span>
      <span class='kw'>end</span> <span class='comment'># if ...elsif... else
</span>    <span class='kw'>end</span> <span class='comment'># @exclusion_keys.each
</span>  <span class='kw'>end</span> <span class='comment'># if raw_scope[:exclusions]
</span>
  <span class='ivar'>@container</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="all_targets-instance_method">
  
    #<strong>all_targets</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(readonly)</span>
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='all_targets?-instance_method'>all_targets?</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Does this scope cover all targets?</p>

<p>If this is true, the @inclusions Hash is ignored, and all targets in the
JSS form the base scope.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


253
254
255</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/scopable/scope.rb', line 253</span>

<span class='kw'>def</span> <span class='id identifier rubyid_all_targets'>all_targets</span>
  <span class='ivar'>@all_targets</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="container=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="container-instance_method">
  
    #<strong>container</strong>  &#x21d2; <tt><span class='object_link'><a href="../APIObject.html" title="JSS::APIObject (class)">JSS::APIObject</a></span> subclass</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>A reference to the object that contains this Scope</p>

<p>For telling it when a change is made and an update needed</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../APIObject.html" title="JSS::APIObject (class)">JSS::APIObject</a></span> subclass</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


223
224
225</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/scopable/scope.rb', line 223</span>

<span class='kw'>def</span> <span class='id identifier rubyid_container'>container</span>
  <span class='ivar'>@container</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="exclusions-instance_method">
  
    #<strong>exclusions</strong>  &#x21d2; <tt><span class='object_link'><a href="../../Hash.html" title="Hash (class)">Hash</a></span>&lt;<span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&gt;</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The items in these arrays are the exclusions applied to targets in the
@inclusions .</p>

<p>The arrays of names are:</p>
<ul><li>
<p>:targets</p>
</li><li>
<p>:target_groups</p>
</li><li>
<p>:departments</p>
</li><li>
<p>:buildings</p>
</li><li>
<p>:network_segments</p>
</li><li>
<p>:users</p>
</li><li>
<p>:user_groups</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Hash.html" title="Hash (class)">Hash</a></span>&lt;<span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


279
280
281</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/scopable/scope.rb', line 279</span>

<span class='kw'>def</span> <span class='id identifier rubyid_exclusions'>exclusions</span>
  <span class='ivar'>@exclusions</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="inclusions-instance_method">
  
    #<strong>inclusions</strong>  &#x21d2; <tt><span class='object_link'><a href="../../Hash.html" title="Hash (class)">Hash</a></span>&lt;<span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&gt;</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The items which form the base scope of included targets</p>

<p>This is the group of targets to which the limitations and exclusions apply.
they keys are:</p>
<ul><li>
<p>:targets</p>
</li><li>
<p>:target_groups</p>
</li><li>
<p>:departments</p>
</li><li>
<p>:buildings</p>
</li></ul>

<p>and the values are Arrays of names of those things.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Hash.html" title="Hash (class)">Hash</a></span>&lt;<span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


244
245
246</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/scopable/scope.rb', line 244</span>

<span class='kw'>def</span> <span class='id identifier rubyid_inclusions'>inclusions</span>
  <span class='ivar'>@inclusions</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="limitations-instance_method">
  
    #<strong>limitations</strong>  &#x21d2; <tt><span class='object_link'><a href="../../Hash.html" title="Hash (class)">Hash</a></span>&lt;<span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&gt;</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The items in these arrays are the limitations applied to targets in the
@inclusions .</p>

<p>The arrays of names are:</p>
<ul><li>
<p>:network_segments</p>
</li><li>
<p>:users</p>
</li><li>
<p>:user_groups</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Hash.html" title="Hash (class)">Hash</a></span>&lt;<span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


264
265
266</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/scopable/scope.rb', line 264</span>

<span class='kw'>def</span> <span class='id identifier rubyid_limitations'>limitations</span>
  <span class='ivar'>@limitations</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="target_class-instance_method">
  
    #<strong>target_class</strong>  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>what type of target is this scope for? Computers or Mobiledevices?</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


230
231
232</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/scopable/scope.rb', line 230</span>

<span class='kw'>def</span> <span class='id identifier rubyid_target_class'>target_class</span>
  <span class='ivar'>@target_class</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="unable_to_verify_ldap_entries=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="unable_to_verify_ldap_entries-instance_method">
  
    #<strong>unable_to_verify_ldap_entries</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns should we expect a potential 409 Conflict if we can&#39;t connect
to LDAP servers for verification?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>should we expect a potential 409 Conflict if we can&#39;t connect to LDAP
servers for verification?</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


227
228
229</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/scopable/scope.rb', line 227</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unable_to_verify_ldap_entries'>unable_to_verify_ldap_entries</span>
  <span class='ivar'>@unable_to_verify_ldap_entries</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="add_exclusion-instance_method">
  
    #<strong>add_exclusion</strong>(key, item)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Add a single item for exclusions of this scope.</p>

<p>The item name will be checked for existence in the JSS, and an exception
raised if the item doesn&#39;t exist.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_add_exclusion'>add_exclusion</span><span class='lparen'>(</span><span class='symbol'>:network_segments</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the type of item being added to the exclusions, :computer, :building, etc…</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>item</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>, <tt>integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a valid identifier of the item being added</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../AlreadyExistsError.html" title="JSS::AlreadyExistsError (class)">JSS::AlreadyExistsError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


632
633
634
635
636
637
638
639
640
641
642
643</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/scopable/scope.rb', line 632</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_exclusion'>add_exclusion</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_pluralize_key'>pluralize_key</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_item_id'>item_id</span> <span class='op'>=</span> <span class='id identifier rubyid_validate_item'>validate_item</span><span class='lparen'>(</span><span class='symbol'>:exclusion</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='ivar'>@exclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@exclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_item_id'>item_id</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../../JSS.html" title="JSS (module)">JSS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../AlreadyExistsError.html" title="JSS::AlreadyExistsError (class)">AlreadyExistsError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Can&#39;t exclude </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_content'> scope to &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_item'>item</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; because it&#39;s already explicitly included.</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='ivar'>@inclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@inclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../../JSS.html" title="JSS (module)">JSS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../AlreadyExistsError.html" title="JSS::AlreadyExistsError (class)">AlreadyExistsError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Can&#39;t exclude </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_content'> &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_item'>item</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; because it&#39;s already an explicit limitation.</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='ivar'>@limitations</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@limitations</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>

  <span class='ivar'>@exclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_item_id'>item_id</span>
  <span class='ivar'>@container</span><span class='period'>.</span><span class='id identifier rubyid_should_update'>should_update</span> <span class='kw'>if</span> <span class='ivar'>@container</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_limitation-instance_method">
  
    #<strong>add_limitation</strong>(key, item)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note todo">
    <strong>TODO:</strong>
    <div class='inline'>
<p>handle ldap user/group lookups</p>
</div>
  </div>

<p class="note returns_void">This method returns an undefined value.</p>
<p>Add a single item for limiting this scope.</p>

<p>The item name will be checked for existence in the JSS, and an exception
raised if the item doesn&#39;t exist.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_add_limitation'>add_limitation</span><span class='lparen'>(</span><span class='symbol'>:network_segments</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the type of item being added, :computer, :building, etc…</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>item</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>, <tt>integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a valid identifier of the item being added</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


545
546
547
548
549
550
551
552
553
554
555
556</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/scopable/scope.rb', line 545</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_limitation'>add_limitation</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_pluralize_key'>pluralize_key</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_item_id'>item_id</span> <span class='op'>=</span> <span class='id identifier rubyid_validate_item'>validate_item</span><span class='lparen'>(</span><span class='symbol'>:limitation</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='ivar'>@limitations</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@exclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_item_id'>item_id</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='ivar'>@exclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@exclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_item_id'>item_id</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../../JSS.html" title="JSS (module)">JSS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../AlreadyExistsError.html" title="JSS::AlreadyExistsError (class)">AlreadyExistsError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Can&#39;t set </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_content'> limitation for &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; because it&#39;s already an explicit exclusion.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='ivar'>@limitations</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_item_id'>item_id</span>
  <span class='ivar'>@container</span><span class='period'>.</span><span class='id identifier rubyid_should_update'>should_update</span> <span class='kw'>if</span> <span class='ivar'>@container</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_target-instance_method">
  
    #<strong>add_target</strong>(key, item)  &#x21d2; <tt>void</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='add_inclusion-instance_method'>add_inclusion</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Add a single item as a target in this scope.</p>

<p>The item name will be checked for existence in the JSS, and an exception</p>

<pre class="code ruby"><code class="ruby">raised if the item doesn&#39;t exist.</code></pre>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_add_target'>add_target</span><span class='lparen'>(</span><span class='symbol'>:computers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mantis</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></code></pre>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_add_target'>add_target</span><span class='lparen'>(</span><span class='symbol'>:computer_groups</span><span class='comma'>,</span> <span class='int'>2342</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the key from #<span class='object_link'><a href="#SCOPING_CLASSES-constant" title="JSS::Scopable::Scope::SCOPING_CLASSES (constant)">SCOPING_CLASSES</a></span> for the kind of item being added,
:computer, :building, etc…</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>item</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>, <tt>integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a valid identifier of the item being added</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../AlreadyExistsError.html" title="JSS::AlreadyExistsError (class)">JSS::AlreadyExistsError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


458
459
460
461
462
463
464
465
466
467
468</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/scopable/scope.rb', line 458</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_target'>add_target</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_pluralize_key'>pluralize_key</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_item_id'>item_id</span> <span class='op'>=</span> <span class='id identifier rubyid_validate_item'>validate_item</span><span class='lparen'>(</span><span class='symbol'>:target</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='ivar'>@inclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@exclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_item_id'>item_id</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../../JSS.html" title="JSS (module)">JSS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../AlreadyExistsError.html" title="JSS::AlreadyExistsError (class)">AlreadyExistsError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Can&#39;t set </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_content'> target to &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_item'>item</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; because it&#39;s already an explicit exclusion.</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='ivar'>@exclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@exclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_item_id'>item_id</span><span class='rparen'>)</span>

  <span class='ivar'>@inclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_item_id'>item_id</span>
  <span class='ivar'>@all_targets</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@container</span><span class='period'>.</span><span class='id identifier rubyid_should_update'>should_update</span> <span class='kw'>if</span> <span class='ivar'>@container</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="include_all-instance_method">
  
    #<strong>include_all</strong>(clear = false)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Set the scope&#39;s inclusions to all targets.</p>

<p>By default, the limitations and exclusions remain. If a non-false parameter
is provided, they will be removed also.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>clear</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Should the limitations and exclusions be removed also?</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


384
385
386
387
388
389
390
391
392
393
394
395
396</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/scopable/scope.rb', line 384</span>

<span class='kw'>def</span> <span class='id identifier rubyid_include_all'>include_all</span><span class='lparen'>(</span><span class='id identifier rubyid_clear'>clear</span> <span class='op'>=</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='ivar'>@inclusions</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@inclusion_keys</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span> <span class='ivar'>@inclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
  <span class='ivar'>@all_targets</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_clear'>clear</span>
    <span class='ivar'>@limitations</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='const'><span class='object_link'><a href="#LIMITATIONS-constant" title="JSS::Scopable::Scope::LIMITATIONS (constant)">LIMITATIONS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span> <span class='ivar'>@limitations</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>

    <span class='ivar'>@exclusions</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='ivar'>@exclusion_keys</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span> <span class='ivar'>@exclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='ivar'>@container</span><span class='period'>.</span><span class='id identifier rubyid_should_update'>should_update</span> <span class='kw'>if</span> <span class='ivar'>@container</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pretty_print_instance_variables-instance_method">
  
    #<strong>pretty_print_instance_variables</strong>  &#x21d2; <tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Remove the init_data and api object from the instance_variables used to
create pretty-print (pp) output.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the desired instance_variables</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


734
735
736
737
738</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/scopable/scope.rb', line 734</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pretty_print_instance_variables'>pretty_print_instance_variables</span>
  <span class='id identifier rubyid_vars'>vars</span> <span class='op'>=</span> <span class='id identifier rubyid_instance_variables'>instance_variables</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span>
  <span class='id identifier rubyid_vars'>vars</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span> <span class='symbol'>:@container</span>
  <span class='id identifier rubyid_vars'>vars</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="remove_exclusion-instance_method">
  
    #<strong>remove_exclusion</strong>(key, item)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Remove a single item for exclusions of this scope</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_remove_exclusion'>remove_exclusion</span><span class='lparen'>(</span><span class='symbol'>:network_segments</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the type of item being removed from the excludions, :computer, :building,
etc…</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>item</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>, <tt>integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a valid identifier of the item being removed</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


656
657
658
659
660
661
662
663</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/scopable/scope.rb', line 656</span>

<span class='kw'>def</span> <span class='id identifier rubyid_remove_exclusion'>remove_exclusion</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_pluralize_key'>pluralize_key</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_item_id'>item_id</span> <span class='op'>=</span> <span class='id identifier rubyid_validate_item'>validate_item</span> <span class='symbol'>:exclusion</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_item'>item</span><span class='comma'>,</span> <span class='label'>error_if_not_found:</span> <span class='kw'>false</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='ivar'>@exclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@exclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_item_id'>item_id</span><span class='rparen'>)</span>

  <span class='ivar'>@exclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span> <span class='id identifier rubyid_item_id'>item_id</span>
  <span class='ivar'>@container</span><span class='period'>.</span><span class='id identifier rubyid_should_update'>should_update</span> <span class='kw'>if</span> <span class='ivar'>@container</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="remove_limitation-instance_method">
  
    #<strong>remove_limitation</strong>(key, item)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note todo">
    <strong>TODO:</strong>
    <div class='inline'>
<p>handle ldap user/group lookups</p>
</div>
  </div>

<p class="note returns_void">This method returns an undefined value.</p>
<p>Remove a single item for limiting this scope.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_remove_limitation'>remove_limitation</span><span class='lparen'>(</span><span class='symbol'>:network_segments</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the type of item being removed, :computer, :building, etc…</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>item</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>, <tt>integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a valid identifier of the item being removed</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


571
572
573
574
575
576
577
578
579</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/scopable/scope.rb', line 571</span>

<span class='kw'>def</span> <span class='id identifier rubyid_remove_limitation'>remove_limitation</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_pluralize_key'>pluralize_key</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_item_id'>item_id</span> <span class='op'>=</span> <span class='id identifier rubyid_validate_item'>validate_item</span> <span class='symbol'>:limitation</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_item'>item</span><span class='comma'>,</span> <span class='label'>error_if_not_found:</span> <span class='kw'>false</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_item_id'>item_id</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='ivar'>@limitations</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@exclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_item_id'>item_id</span><span class='rparen'>)</span>

  <span class='ivar'>@limitations</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span> <span class='id identifier rubyid_item_id'>item_id</span>
  <span class='ivar'>@container</span><span class='period'>.</span><span class='id identifier rubyid_should_update'>should_update</span> <span class='kw'>if</span> <span class='ivar'>@container</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="remove_target-instance_method">
  
    #<strong>remove_target</strong>(key, item)  &#x21d2; <tt>void</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='remove_inclusion-instance_method'>remove_inclusion</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Remove a single item as a target for this scope.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_remove_target'>remove_target</span><span class='lparen'>(</span><span class='symbol'>:computer</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mantis</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the key from #<span class='object_link'><a href="#SCOPING_CLASSES-constant" title="JSS::Scopable::Scope::SCOPING_CLASSES (constant)">SCOPING_CLASSES</a></span> for the kind of item being removed,
:computer, :building, etc…</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>item</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>, <tt>integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a valid identifier of the item being removed</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


482
483
484
485
486
487
488
489
490</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/scopable/scope.rb', line 482</span>

<span class='kw'>def</span> <span class='id identifier rubyid_remove_target'>remove_target</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_pluralize_key'>pluralize_key</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_item_id'>item_id</span> <span class='op'>=</span> <span class='id identifier rubyid_validate_item'>validate_item</span> <span class='symbol'>:target</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_item'>item</span><span class='comma'>,</span> <span class='label'>error_if_not_found:</span> <span class='kw'>false</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_item_id'>item_id</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='ivar'>@inclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@exclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_item_id'>item_id</span><span class='rparen'>)</span>

  <span class='ivar'>@inclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span> <span class='id identifier rubyid_item_id'>item_id</span>
  <span class='ivar'>@container</span><span class='period'>.</span><span class='id identifier rubyid_should_update'>should_update</span> <span class='kw'>if</span> <span class='ivar'>@container</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="scope_xml-instance_method">
  
    #<strong>scope_xml</strong>  &#x21d2; <tt>REXML::Element</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Return a REXML Element containing the current state of the Scope for adding
into the XML of the container.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>REXML::Element</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


671
672
673
674
675
676
677
678
679
680
681
682
683
684
685
686
687
688
689
690
691
692
693
694
695
696
697
698
699
700
701
702
703
704
705
706
707
708
709
710
711
712
713
714
715
716
717
718
719
720
721
722
723
724
725
726</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/scopable/scope.rb', line 671</span>

<span class='kw'>def</span> <span class='id identifier rubyid_scope_xml'>scope_xml</span>
  <span class='id identifier rubyid_scope'>scope</span> <span class='op'>=</span> <span class='const'>REXML</span><span class='op'>::</span><span class='const'>Element</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>scope</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_scope'>scope</span><span class='period'>.</span><span class='id identifier rubyid_add_element'>add_element</span><span class='lparen'>(</span><span class='ivar'>@all_key</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='op'>=</span> <span class='ivar'>@all_targets</span>

  <span class='ivar'>@inclusions</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klass'>klass</span><span class='comma'>,</span> <span class='id identifier rubyid_list'>list</span><span class='op'>|</span>
    <span class='id identifier rubyid_list'>list</span><span class='period'>.</span><span class='id identifier rubyid_compact!'>compact!</span>
    <span class='id identifier rubyid_list'>list</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span> <span class='int'>0</span>
    <span class='id identifier rubyid_list_as_hashes'>list_as_hashes</span> <span class='op'>=</span> <span class='id identifier rubyid_list'>list</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='lbrace'>{</span> <span class='label'>id:</span> <span class='id identifier rubyid_i'>i</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_scope'>scope</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="#SCOPING_CLASSES-constant" title="JSS::Scopable::Scope::SCOPING_CLASSES (constant)">SCOPING_CLASSES</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_klass'>klass</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_xml_list'>xml_list</span><span class='lparen'>(</span><span class='id identifier rubyid_list_as_hashes'>list_as_hashes</span><span class='comma'>,</span> <span class='symbol'>:id</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_limitations'>limitations</span> <span class='op'>=</span> <span class='id identifier rubyid_scope'>scope</span><span class='period'>.</span><span class='id identifier rubyid_add_element'>add_element</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>limitations</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='ivar'>@limitations</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klass'>klass</span><span class='comma'>,</span> <span class='id identifier rubyid_list'>list</span><span class='op'>|</span>
    <span class='id identifier rubyid_list'>list</span><span class='period'>.</span><span class='id identifier rubyid_compact!'>compact!</span>
    <span class='id identifier rubyid_list'>list</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span> <span class='int'>0</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_klass'>klass</span> <span class='op'>==</span> <span class='symbol'>:jamf_ldap_users</span>
      <span class='id identifier rubyid_users_xml'>users_xml</span> <span class='op'>=</span> <span class='id identifier rubyid_limitations'>limitations</span><span class='period'>.</span><span class='id identifier rubyid_add_element'>add_element</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>users</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_list'>list</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span>
        <span class='id identifier rubyid_user_xml'>user_xml</span> <span class='op'>=</span> <span class='id identifier rubyid_users_xml'>users_xml</span><span class='period'>.</span><span class='id identifier rubyid_add_element'>add_element</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>user</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_user_xml'>user_xml</span><span class='period'>.</span><span class='id identifier rubyid_add_element'>add_element</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>name</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
      <span class='kw'>end</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_klass'>klass</span> <span class='op'>==</span> <span class='symbol'>:ldap_user_groups</span>
      <span class='id identifier rubyid_user_groups_xml'>user_groups_xml</span> <span class='op'>=</span> <span class='id identifier rubyid_limitations'>limitations</span><span class='period'>.</span><span class='id identifier rubyid_add_element'>add_element</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>user_groups</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_list'>list</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span>
        <span class='id identifier rubyid_user_group_xml'>user_group_xml</span> <span class='op'>=</span> <span class='id identifier rubyid_user_groups_xml'>user_groups_xml</span><span class='period'>.</span><span class='id identifier rubyid_add_element'>add_element</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>user_group</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_user_group_xml'>user_group_xml</span><span class='period'>.</span><span class='id identifier rubyid_add_element'>add_element</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>name</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_list_as_hashes'>list_as_hashes</span> <span class='op'>=</span> <span class='id identifier rubyid_list'>list</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='lbrace'>{</span> <span class='label'>id:</span> <span class='id identifier rubyid_i'>i</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>
      <span class='id identifier rubyid_limitations'>limitations</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="#SCOPING_CLASSES-constant" title="JSS::Scopable::Scope::SCOPING_CLASSES (constant)">SCOPING_CLASSES</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_klass'>klass</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_xml_list'>xml_list</span><span class='lparen'>(</span><span class='id identifier rubyid_list_as_hashes'>list_as_hashes</span><span class='comma'>,</span> <span class='symbol'>:id</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_exclusions'>exclusions</span> <span class='op'>=</span> <span class='id identifier rubyid_scope'>scope</span><span class='period'>.</span><span class='id identifier rubyid_add_element'>add_element</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>exclusions</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='ivar'>@exclusions</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klass'>klass</span><span class='comma'>,</span> <span class='id identifier rubyid_list'>list</span><span class='op'>|</span>
    <span class='id identifier rubyid_list'>list</span><span class='period'>.</span><span class='id identifier rubyid_compact!'>compact!</span>
    <span class='id identifier rubyid_list'>list</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span> <span class='int'>0</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_klass'>klass</span> <span class='op'>==</span> <span class='symbol'>:jamf_ldap_users</span>
      <span class='id identifier rubyid_users_xml'>users_xml</span> <span class='op'>=</span> <span class='id identifier rubyid_exclusions'>exclusions</span><span class='period'>.</span><span class='id identifier rubyid_add_element'>add_element</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>users</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_list'>list</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span>
        <span class='id identifier rubyid_user_xml'>user_xml</span> <span class='op'>=</span> <span class='id identifier rubyid_users_xml'>users_xml</span><span class='period'>.</span><span class='id identifier rubyid_add_element'>add_element</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>user</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_user_xml'>user_xml</span><span class='period'>.</span><span class='id identifier rubyid_add_element'>add_element</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>name</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
      <span class='kw'>end</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_klass'>klass</span> <span class='op'>==</span> <span class='symbol'>:ldap_user_groups</span>
      <span class='id identifier rubyid_user_groups_xml'>user_groups_xml</span> <span class='op'>=</span> <span class='id identifier rubyid_exclusions'>exclusions</span><span class='period'>.</span><span class='id identifier rubyid_add_element'>add_element</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>user_groups</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_list'>list</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span>
        <span class='id identifier rubyid_user_group_xml'>user_group_xml</span> <span class='op'>=</span> <span class='id identifier rubyid_user_groups_xml'>user_groups_xml</span><span class='period'>.</span><span class='id identifier rubyid_add_element'>add_element</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>user_group</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_user_group_xml'>user_group_xml</span><span class='period'>.</span><span class='id identifier rubyid_add_element'>add_element</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>name</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_list_as_hashes'>list_as_hashes</span> <span class='op'>=</span> <span class='id identifier rubyid_list'>list</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='lbrace'>{</span> <span class='label'>id:</span> <span class='id identifier rubyid_i'>i</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>
      <span class='id identifier rubyid_exclusions'>exclusions</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="#SCOPING_CLASSES-constant" title="JSS::Scopable::Scope::SCOPING_CLASSES (constant)">SCOPING_CLASSES</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_klass'>klass</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_xml_list'>xml_list</span><span class='lparen'>(</span><span class='id identifier rubyid_list_as_hashes'>list_as_hashes</span><span class='comma'>,</span> <span class='symbol'>:id</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_scope'>scope</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_exclusion-instance_method">
  
    #<strong>set_exclusion</strong>(key, list)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Replace an exclusion list for this scope</p>

<p>The list must be an Array of names of items of the Class being excluded
from the scope Each will be checked for existence in the JSS, and an
exception raised if the item doesn&#39;t exist.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_set_exclusion'>set_exclusion</span><span class='lparen'>(</span><span class='symbol'>:network_segments</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the type of item being excluded, :computer, :building, etc…</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>list</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the identifiers of the items being set</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../InvalidDataError.html" title="JSS::InvalidDataError (class)">JSS::InvalidDataError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616
617</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/scopable/scope.rb', line 595</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_exclusion'>set_exclusion</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_list'>list</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_pluralize_key'>pluralize_key</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../../JSS.html" title="JSS (module)">JSS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../InvalidDataError.html" title="JSS::InvalidDataError (class)">InvalidDataError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>List must be an Array of </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_content'> identifiers, it may be empty.</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_list'>list</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span></span>

  <span class='comment'># check the idents
</span>  <span class='id identifier rubyid_list'>list</span><span class='period'>.</span><span class='id identifier rubyid_map!'>map!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_ident'>ident</span><span class='op'>|</span>
    <span class='id identifier rubyid_item_id'>item_id</span> <span class='op'>=</span> <span class='id identifier rubyid_validate_item'>validate_item</span><span class='lparen'>(</span><span class='symbol'>:exclusion</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_ident'>ident</span><span class='rparen'>)</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_key'>key</span>
    <span class='kw'>when</span> <span class='op'>*</span><span class='ivar'>@inclusion_keys</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../../JSS.html" title="JSS (module)">JSS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../AlreadyExistsError.html" title="JSS::AlreadyExistsError (class)">AlreadyExistsError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Can&#39;t exclude </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_content'> &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ident'>ident</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; because it&#39;s already explicitly included.</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='ivar'>@inclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@exclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_item_id'>item_id</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='op'>*</span><span class='const'><span class='object_link'><a href="#LIMITATIONS-constant" title="JSS::Scopable::Scope::LIMITATIONS (constant)">LIMITATIONS</a></span></span>
      <span class='kw'>if</span> <span class='ivar'>@limitations</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@exclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_item_id'>item_id</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../../JSS.html" title="JSS (module)">JSS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../AlreadyExistsError.html" title="JSS::AlreadyExistsError (class)">AlreadyExistsError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Can&#39;t exclude </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_content'> &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ident'>ident</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; because it&#39;s already an explicit limitation.</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_item_id'>item_id</span>
  <span class='kw'>end</span> <span class='comment'># each
</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_list'>list</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span> <span class='op'>==</span> <span class='ivar'>@exclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span>

  <span class='ivar'>@exclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_list'>list</span>
  <span class='ivar'>@container</span><span class='period'>.</span><span class='id identifier rubyid_should_update'>should_update</span> <span class='kw'>if</span> <span class='ivar'>@container</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_limitation-instance_method">
  
    #<strong>set_limitation</strong>(key, list)  &#x21d2; <tt>void</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='set_limitations-instance_method'>set_limitations</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note todo">
    <strong>TODO:</strong>
    <div class='inline'>
<p>handle ldap user group lookups</p>
</div>
  </div>

<p class="note returns_void">This method returns an undefined value.</p>
<p>Replace a limitation list for this scope.</p>

<p>The list must be an Array of names of items of the Class represented by the
key. Each will be checked for existence in the JSS, and an exception raised
if the item doesn&#39;t exist.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_set_limitation'>set_limitation</span><span class='lparen'>(</span><span class='symbol'>:network_segments</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span><span class='int'>231</span><span class='rbracket'>]</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the type of items being set as limitations, :network_segments, :users, etc…</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>list</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the identifiers of the items being set as limitations</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../InvalidDataError.html" title="JSS::InvalidDataError (class)">JSS::InvalidDataError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/scopable/scope.rb', line 509</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_limitation'>set_limitation</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_list'>list</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_pluralize_key'>pluralize_key</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../../JSS.html" title="JSS (module)">JSS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../InvalidDataError.html" title="JSS::InvalidDataError (class)">InvalidDataError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>List must be an Array of </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_content'> identifiers, it may be empty.</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_list'>list</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span></span>

  <span class='comment'># check the idents
</span>  <span class='id identifier rubyid_list'>list</span><span class='period'>.</span><span class='id identifier rubyid_map!'>map!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_ident'>ident</span><span class='op'>|</span>
    <span class='id identifier rubyid_item_id'>item_id</span> <span class='op'>=</span> <span class='id identifier rubyid_validate_item'>validate_item</span><span class='lparen'>(</span><span class='symbol'>:limitation</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_ident'>ident</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='ivar'>@exclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@exclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_item_id'>item_id</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../../JSS.html" title="JSS (module)">JSS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../AlreadyExistsError.html" title="JSS::AlreadyExistsError (class)">AlreadyExistsError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Can&#39;t set </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_content'> limitation for &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; because it&#39;s already an explicit exclusion.</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_item_id'>item_id</span>
  <span class='kw'>end</span> <span class='comment'># each
</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_list'>list</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span> <span class='op'>==</span> <span class='ivar'>@limitations</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span>

  <span class='ivar'>@limitations</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_list'>list</span>
  <span class='ivar'>@container</span><span class='period'>.</span><span class='id identifier rubyid_should_update'>should_update</span> <span class='kw'>if</span> <span class='ivar'>@container</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_targets-instance_method">
  
    #<strong>set_targets</strong>(key, list)  &#x21d2; <tt>void</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='set_target-instance_method'>set_target</span>, <span id='set_inclusion-instance_method'>set_inclusion</span>, <span id='set_inclusions-instance_method'>set_inclusions</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Replace a list of item names for as targets in this scope.</p>

<p>The list must be an Array of names of items of the Class represented by the
key. Each will be checked for existence in the JSS, and an exception raised
if the item doesn&#39;t exist.</p>

<p>being included, :computer, :building, etc…</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_set_targets'>set_targets</span><span class='lparen'>(</span><span class='symbol'>:computers</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>kimchi</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mantis</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the key from #<span class='object_link'><a href="#SCOPING_CLASSES-constant" title="JSS::Scopable::Scope::SCOPING_CLASSES (constant)">SCOPING_CLASSES</a></span> for the kind of items</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>list</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>identifiers of the items being added</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../InvalidDataError.html" title="JSS::InvalidDataError (class)">JSS::InvalidDataError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/scopable/scope.rb', line 415</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_targets'>set_targets</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_list'>list</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_pluralize_key'>pluralize_key</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../../JSS.html" title="JSS (module)">JSS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../InvalidDataError.html" title="JSS::InvalidDataError (class)">InvalidDataError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>List must be an Array of </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_content'> identifiers, it may be empty.</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_list'>list</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span></span>

  <span class='comment'># check the idents
</span>  <span class='id identifier rubyid_list'>list</span><span class='period'>.</span><span class='id identifier rubyid_map!'>map!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_ident'>ident</span><span class='op'>|</span>
    <span class='id identifier rubyid_item_id'>item_id</span> <span class='op'>=</span> <span class='id identifier rubyid_validate_item'>validate_item</span><span class='lparen'>(</span><span class='symbol'>:target</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_ident'>ident</span><span class='rparen'>)</span>

    <span class='kw'>if</span> <span class='ivar'>@exclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@exclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_item_id'>item_id</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../../JSS.html" title="JSS (module)">JSS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../AlreadyExistsError.html" title="JSS::AlreadyExistsError (class)">AlreadyExistsError</a></span></span><span class='comma'>,</span> \
            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Can&#39;t set </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_content'> target to &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ident'>ident</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; because it&#39;s already an explicit exclusion.</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_item_id'>item_id</span>
  <span class='kw'>end</span> <span class='comment'># each
</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_list'>list</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span> <span class='op'>==</span> <span class='ivar'>@inclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span>

  <span class='ivar'>@inclusions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_list'>list</span>
  <span class='ivar'>@all_targets</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@container</span><span class='period'>.</span><span class='id identifier rubyid_should_update'>should_update</span> <span class='kw'>if</span> <span class='ivar'>@container</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Fri Aug  7 11:26:28 2020 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.20 (ruby-2.3.7).
</div>

    </div>
  </body>
</html>
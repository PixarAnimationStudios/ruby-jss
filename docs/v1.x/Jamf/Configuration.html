<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Jamf::Configuration
  
    &mdash; ruby-jss-1.3.3
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Jamf::Configuration";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (C)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Jamf.html" title="Jamf (module)">Jamf</a></span></span>
     &raquo; 
    <span class="title">Configuration</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Jamf::Configuration
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">Jamf::Configuration</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd>Singleton</dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/jamf/configuration.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Passwords are not saved in prefs files. Your application will have to
acquire them using the :prompt or :stdin options to
APIConnection#connect, or by custom means.</p>
</div>
  </div>


<p>A class for working with pre-defined settings &amp; preferences for the
JAMF Gem</p>

<p>This is a singleton class, only one instance can exist at a time.</p>

<p>When the JAMF module loads, that instance is created and stored in the
constant CONFIG, which can then be used in applications to avoid
always having to pass in server names, API user names and so on.</p>

<p>When the Jamf::Configuration instance is created, the GLOBAL_CONF file
(/etc/jss_gem.conf) is examined if it exists, and the items in it are
loaded into the attributes.</p>

<p>Then the user-specific USER_CONF file (~/.ruby-jss.conf) is examined if
it exists, and any attributes defined there will override those values from
the GLOBAL_CONF.</p>

<p>The file format is one attribute per line, thus:</p>

<pre class="code ruby"><code class="ruby">attr_name: value</code></pre>

<p>Lines that don&#39;t start with a known attribute name followed by a colon
are ignored. If an attribute is defined more than once, the last one wins.</p>

<p>The known attributes are:</p>
<ul><li>
<p>api_server_name [String] the hostname of the JAMF API server</p>
</li><li>
<p>api_server_port [Integer] the port number for the API connection</p>
</li><li>
<p>api_ssl_version [String] the SSL version (from the open_ssl module) to use
for the connection.</p>
</li><li>
<p>api_verify_cert [Boolean] if SSL is used, should the SSL certificate be
verified (usually false for a self-signed cert)</p>
</li><li>
<p>api_username [String] the JAMF username for connecting to the API</p>
</li><li>
<p>api_timeout_open [Integer] the number of seconds for the open-connection
timeout</p>
</li><li>
<p>api_timeout [Integer] the number of seconds for the response timeout</p>
</li></ul>

<p>The APIConnection#connect method will first use any values given as
method arguments. For any not given, it will look at the Preferences
instance for any values there, and if still none, will use default values
or raise an exception.</p>

<p>At any point, the attributes can read or changed using standard Ruby
getter/setter methods matching the name of the attribute, e.g.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="../Jamf.html" title="Jamf (module)">Jamf</a></span></span><span class='op'>::</span><span class='const'>CONFIG</span><span class='period'>.</span><span class='id identifier rubyid_api_server_name'>api_server_name</span>  <span class='comment'># =&gt; &#39;myjss.mycompany.com&#39;
</span><span class='const'><span class='object_link'><a href="../Jamf.html" title="Jamf (module)">Jamf</a></span></span><span class='op'>::</span><span class='const'>CONFIG</span><span class='period'>.</span><span class='id identifier rubyid_api_server_name'>api_server_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>otherjss.mycompany.com</span><span class='tstring_end'>&#39;</span></span>  <span class='comment'># sets the api_server_name to a new value
</span></code></pre>

<p>The current settings may be saved to the GLOBAL_CONF file, the USER_CONF
file, or an arbitrary file using <span class='object_link'><a href="#save-instance_method" title="Jamf::Configuration#save (method)">#save</a></span>. The argument to <span class='object_link'><a href="#save-instance_method" title="Jamf::Configuration#save (method)">#save</a></span> should be
either :user, :global, or a String or Pathname file path. NOTE: This
overwrites any existing file.</p>

<p>To re-load the settings use <span class='object_link'><a href="#reload-instance_method" title="Jamf::Configuration#reload (method)">#reload</a></span>. This clears the current settings,
and re-reads both the global and user files. If a pathname is provided,
e.g.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="../Jamf.html" title="Jamf (module)">Jamf</a></span></span><span class='op'>::</span><span class='const'>CONFIG</span><span class='period'>.</span><span class='id identifier rubyid_reload'>reload</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/path/to/other/file</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<p>the current settings are cleared and reloaded from that other file.</p>

<p>To view the current settings, use <span class='object_link'><a href="#print-instance_method" title="Jamf::Configuration#print (method)">#print</a></span>.</p>


  </div>
</div>
<div class="tags">
  

</div>
  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="CONF_FILENAME-constant" class="">CONF_FILENAME =
          <div class="docstring">
  <div class="discussion">
    
<p>The filename for storing the config, globally or user-level. The first
matching file is used - the array provides backward compatibility with
earlier versions. Saving will always happen to the first filename</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ruby-jss.conf</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="GLOBAL_CONF_FILE-constant" class="">GLOBAL_CONF_FILE =
          <div class="docstring">
  <div class="discussion">
    
<p>The Pathname to the machine-wide preferences</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='const'><span class='object_link'><a href="../Pathname.html" title="Pathname (class)">Pathname</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/etc/</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="#CONF_FILENAME-constant" title="Jamf::Configuration::CONF_FILENAME (constant)">CONF_FILENAME</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="USER_CONF_FILE-constant" class="">USER_CONF_FILE =
          <div class="docstring">
  <div class="discussion">
    
<p>The Pathname to the user-specific preferences plist if there is one</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='const'><span class='object_link'><a href="../Pathname.html" title="Pathname (class)">Pathname</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>ENV</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>HOME</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>/.</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="#CONF_FILENAME-constant" title="Jamf::Configuration::CONF_FILENAME (constant)">CONF_FILENAME</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></pre></dd>
      
        <dt id="CONF_KEYS-constant" class="">CONF_KEYS =
          <div class="docstring">
  <div class="discussion">
    
<p>The attribute keys we maintain, and the type they should be stored as</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='label'>api_server_name:</span> <span class='symbol'>:to_s</span><span class='comma'>,</span>
  <span class='label'>api_server_port:</span> <span class='symbol'>:to_i</span><span class='comma'>,</span>
  <span class='label'>api_ssl_version:</span> <span class='symbol'>:to_s</span><span class='comma'>,</span>
  <span class='label'>api_verify_cert:</span> <span class='symbol'>:j_to_bool</span><span class='comma'>,</span>
  <span class='label'>api_username:</span> <span class='symbol'>:to_s</span><span class='comma'>,</span>
  <span class='label'>api_timeout_open:</span> <span class='symbol'>:to_i</span><span class='comma'>,</span>
  <span class='label'>api_timeout:</span> <span class='symbol'>:to_i</span><span class='comma'>,</span>
  <span class='label'>db_server_name:</span> <span class='symbol'>:to_s</span><span class='comma'>,</span>
  <span class='label'>db_server_port:</span> <span class='symbol'>:to_i</span><span class='comma'>,</span>
  <span class='label'>db_server_socket:</span> <span class='symbol'>:to_s</span><span class='comma'>,</span>
  <span class='label'>db_username:</span> <span class='symbol'>:to_s</span><span class='comma'>,</span>
  <span class='label'>db_name:</span> <span class='symbol'>:to_s</span><span class='comma'>,</span>
  <span class='label'>db_connect_timeout:</span> <span class='symbol'>:to_i</span><span class='comma'>,</span>
  <span class='label'>db_read_timeout:</span> <span class='symbol'>:to_i</span><span class='comma'>,</span>
  <span class='label'>db_write_timeout:</span> <span class='symbol'>:to_i</span>
<span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clear_all-instance_method" title="#clear_all (instance method)">#<strong>clear_all</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Clear all values.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>  &#x21d2; Configuration </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Initialize!.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print-instance_method" title="#print (instance method)">#<strong>print</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Print out the current settings to stdout.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read_global-instance_method" title="#read_global (instance method)">#<strong>read_global</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>(Re)read the global prefs, if it exists.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read_user-instance_method" title="#read_user (instance method)">#<strong>read_user</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>(Re)read the user prefs, if it exists.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reload-instance_method" title="#reload (instance method)">#<strong>reload</strong>(file = nil)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Clear the settings and reload the prefs files, or another file if provided.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#save-instance_method" title="#save (instance method)">#<strong>save</strong>(file)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Save the prefs into a file.</p>
</div></span>
  
</li>

      
    </ul>
  


  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="Jamf::Configuration (class)">Configuration</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Initialize!</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


139
140
141
142</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jamf/configuration.rb', line 139</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>
  <span class='id identifier rubyid_read_global'>read_global</span>
  <span class='id identifier rubyid_read_user'>read_user</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="clear_all-instance_method">
  
    #<strong>clear_all</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Clear all values</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


151
152
153</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jamf/configuration.rb', line 151</span>

<span class='kw'>def</span> <span class='id identifier rubyid_clear_all'>clear_all</span>
  <span class='const'><span class='object_link'><a href="#CONF_KEYS-constant" title="Jamf::Configuration::CONF_KEYS (constant)">CONF_KEYS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span> <span class='id identifier rubyid_send'>send</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_k'>k</span><span class='embexpr_end'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='comma'>,</span> <span class='kw'>nil</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print-instance_method">
  
    #<strong>print</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Print out the current settings to stdout</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


236
237
238</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jamf/configuration.rb', line 236</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print'>print</span>
  <span class='const'><span class='object_link'><a href="#CONF_KEYS-constant" title="Jamf::Configuration::CONF_KEYS (constant)">CONF_KEYS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span> <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_k'>k</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_send'>send</span> <span class='id identifier rubyid_k'>k</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="read_global-instance_method">
  
    #<strong>read_global</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>(Re)read the global prefs, if it exists.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


159
160
161</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jamf/configuration.rb', line 159</span>

<span class='kw'>def</span> <span class='id identifier rubyid_read_global'>read_global</span>
  <span class='id identifier rubyid_read'>read</span> <span class='const'><span class='object_link'><a href="#GLOBAL_CONF_FILE-constant" title="Jamf::Configuration::GLOBAL_CONF_FILE (constant)">GLOBAL_CONF_FILE</a></span></span> <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="#GLOBAL_CONF_FILE-constant" title="Jamf::Configuration::GLOBAL_CONF_FILE (constant)">GLOBAL_CONF_FILE</a></span></span><span class='period'>.</span><span class='id identifier rubyid_file?'>file?</span> <span class='op'>&amp;&amp;</span> <span class='const'><span class='object_link'><a href="#GLOBAL_CONF_FILE-constant" title="Jamf::Configuration::GLOBAL_CONF_FILE (constant)">GLOBAL_CONF_FILE</a></span></span><span class='period'>.</span><span class='id identifier rubyid_readable?'>readable?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="read_user-instance_method">
  
    #<strong>read_user</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>(Re)read the user prefs, if it exists.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


167
168
169</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jamf/configuration.rb', line 167</span>

<span class='kw'>def</span> <span class='id identifier rubyid_read_user'>read_user</span>
  <span class='id identifier rubyid_read'>read</span> <span class='const'><span class='object_link'><a href="#USER_CONF_FILE-constant" title="Jamf::Configuration::USER_CONF_FILE (constant)">USER_CONF_FILE</a></span></span> <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="#USER_CONF_FILE-constant" title="Jamf::Configuration::USER_CONF_FILE (constant)">USER_CONF_FILE</a></span></span><span class='period'>.</span><span class='id identifier rubyid_file?'>file?</span> <span class='op'>&amp;&amp;</span> <span class='const'><span class='object_link'><a href="#USER_CONF_FILE-constant" title="Jamf::Configuration::USER_CONF_FILE (constant)">USER_CONF_FILE</a></span></span><span class='period'>.</span><span class='id identifier rubyid_readable?'>readable?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reload-instance_method">
  
    #<strong>reload</strong>(file = nil)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Clear the settings and reload the prefs files, or another file if provided</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>file</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>, <tt><span class='object_link'><a href="../Pathname.html" title="Pathname (class)">Pathname</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>a non-standard prefs file to load</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


177
178
179
180
181
182
183
184
185
186</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jamf/configuration.rb', line 177</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reload'>reload</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_clear_all'>clear_all</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_file'>file</span>
    <span class='id identifier rubyid_read'>read</span> <span class='id identifier rubyid_file'>file</span>
    <span class='kw'>return</span> <span class='kw'>true</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_read_global'>read_global</span>
  <span class='id identifier rubyid_read_user'>read_user</span>
  <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="save-instance_method">
  
    #<strong>save</strong>(file)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Save the prefs into a file</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>file</span>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>, <tt><span class='object_link'><a href="../Pathname.html" title="Pathname (class)">Pathname</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>either :user, :global, or an arbitrary file to save.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="MissingDataError.html" title="Jamf::MissingDataError (class)">Jamf::MissingDataError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jamf/configuration.rb', line 194</span>

<span class='kw'>def</span> <span class='id identifier rubyid_save'>save</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_file'>file</span>
    <span class='kw'>when</span> <span class='symbol'>:global</span> <span class='kw'>then</span> <span class='const'><span class='object_link'><a href="#GLOBAL_CONF_FILE-constant" title="Jamf::Configuration::GLOBAL_CONF_FILE (constant)">GLOBAL_CONF_FILE</a></span></span>
    <span class='kw'>when</span> <span class='symbol'>:user</span> <span class='kw'>then</span> <span class='const'><span class='object_link'><a href="#USER_CONF_FILE-constant" title="Jamf::Configuration::USER_CONF_FILE (constant)">USER_CONF_FILE</a></span></span>
    <span class='kw'>else</span> <span class='const'><span class='object_link'><a href="../Pathname.html" title="Pathname (class)">Pathname</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../Jamf.html" title="Jamf (module)">Jamf</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="MissingDataError.html" title="Jamf::MissingDataError (class)">MissingDataError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No HOME environment variable, can&#39;t write to user conf file.</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

  <span class='comment'># file already exists? read it in and update the values.
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_readable?'>readable?</span>
    <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span>

    <span class='comment'># go thru the known attributes/keys
</span>    <span class='const'><span class='object_link'><a href="#CONF_KEYS-constant" title="Jamf::Configuration::CONF_KEYS (constant)">CONF_KEYS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span>
      <span class='comment'># if the key exists, update it.
</span>      <span class='kw'>if</span> <span class='id identifier rubyid_data'>data</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_k'>k</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='regexp_end'>/</span></span>
        <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_sub!'>sub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_k'>k</span><span class='embexpr_end'>}</span><span class='tstring_content'>:.*$</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_k'>k</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_send'>send</span> <span class='id identifier rubyid_k'>k</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

      <span class='comment'># if not, add it to the end unless it&#39;s nil
</span>      <span class='kw'>else</span>
        <span class='id identifier rubyid_data'>data</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_k'>k</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_send'>send</span> <span class='id identifier rubyid_k'>k</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_k'>k</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='kw'>end</span> <span class='comment'># if data =~ /^#{k}:/
</span>    <span class='kw'>end</span> <span class='comment'># each do |k|
</span>
  <span class='kw'>else</span> <span class='comment'># not readable, make a new file
</span>    <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
    <span class='const'><span class='object_link'><a href="#CONF_KEYS-constant" title="Jamf::Configuration::CONF_KEYS (constant)">CONF_KEYS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span>
      <span class='id identifier rubyid_data'>data</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_k'>k</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_send'>send</span> <span class='id identifier rubyid_k'>k</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_k'>k</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span> <span class='comment'># if path readable
</span>
  <span class='comment'># make sure we end with a newline, the save it.
</span>  <span class='id identifier rubyid_data'>data</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_end_with?'>end_with?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_j_save'>j_save</span> <span class='id identifier rubyid_data'>data</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Fri Aug  7 11:26:48 2020 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.20 (ruby-2.3.7).
</div>

    </div>
  </body>
</html>